### Newtype 模式

Newtype 模式在单字段元组结构中包装现有类型。这提供了类型安全、封装性，以及在不影响原始类型的情况下为包装器类型实现 trait 的能力。

**优势**：
- 零成本抽象（在运行时编译消除）
- 类型安全 - 即使包装相同的底层类型也是不同的类型
- 可为外部类型实现外部 trait（解决孤儿规则）
- 隐藏实现细节
- 为原始类型添加语义含义

```rust, editable
{{#include newtype/src/main.rs}}
```

**关键点**：
- 示例展示了包装 `u64` 的 `UserId` 和 `AccountId` - 防止意外混淆
- 每个 newtype 都有 `new()` 构造器和 `value()` 访问器用于获取内部类型
- `process_user()` 接受特定类型 - 编译器会拒绝 `process_user(account, user)`（顺序错误）
- 第二个示例：包装 `f64` 的 `Meters` 和 `Kilometers`，使用 `From` trait 进行转换
- 所有包装器类型都会被编译消除 - 零运行时开销，仅编译时安全

**何时使用**：
- 当有多个相同类型的参数时（如 `u64`）
- 当想为类型添加语义含义时
- 当需要为外部类型实现外部 trait 时
- 当想限制类型的有效操作时
